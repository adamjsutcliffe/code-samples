using System.Collections;
using System.Collections.Generic;
using Peak.QuixelLogic.Scripts.Common;
using UnityEngine;
using UnityEngine.UI;

namespace Peak.QuixelLogic.Scripts.Game
{
    public class StarUIScript : MonoBehaviour
    {
        [SerializeField]
        private RectTransform starBackground;

        [SerializeField]
        private Animator starAnimator;

        private int xPosition;

        private const int divider = 6;

        [SerializeField]
        private RectTransform thisStar;

        [SerializeField]
        private Image starImage;

        public void SetStarPosition(int percentage)
        {
            starImage.enabled = true;
            starAnimator.Rebind();

            xPosition = (divider * percentage) + 10;
            thisStar.anchoredPosition3D = new Vector3(xPosition, 0, 0);
            starBackground.anchoredPosition3D = new Vector3(xPosition, 0, 0);
        }

        public void LoseStar()
        {
            if (starImage.isActiveAndEnabled && starAnimator != null)
            {
                SoundController.Instance.PlayAudioClip(Settings.Autogenerated.SoundSettingsKey.Losingstar);
                starAnimator.SetTrigger("KillStar");
            }
            else return;
        }
    }
}